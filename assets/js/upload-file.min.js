jQuery(function(l){l(".dlm-metaboxes.downloadable_files").on("click",".dlm_upload_file",function(e){var a;e.preventDefault(),button_elem=this,a=n,(e=document.createElement("input")).type="file",e.addEventListener("change",a),e.dispatchEvent(new MouseEvent("click"))});var n=function(e){[...this.files].forEach(e=>{var a=new FormData;a.append("file",e,e.name),a.append("action","dlm_upload_file"),max_file_size>e.size?l.ajax({type:"POST",url:ajaxurl,success:function(e){var a,n;1==e.success?(a=(a=(n=l(button_elem).parent().parent().find(".downloadable_file_urls")).val())?a+"\n"+e.data.file_url:e.data.file_url,n.val(a)):0==e.success&&(n=l(button_elem).parent().parent().find(".downloadable_file_urls")).parent().append('<div class="notice notice-error dlm-upload-notices"><p>'+e.data.errorMessage+"</p></div>")},error:function(){l(button_elem).parent().parent().find(".downloadable_file_urls").parent().append('<div class="notice notice-error dlm-upload-notices"><p>An error occurred while uploading the file. Please try again.</p></div>')},async:!0,data:a,cache:!1,contentType:!1,processData:!1,timeout:6e4}):(l(".dlm-upload-notices").remove(),l(button_elem).parent().parent().find(".downloadable_file_urls").parent().append('<div class="notice notice-error dlm-upload-notices"><p>The file size exceeds the max_upload_file_size limit. Max: '+max_file_size+"</p></div>"))})}});