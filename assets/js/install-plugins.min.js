!function(i,c){"use strict";function s(t){c.ajax({async:!0,type:"GET",dataType:"html",url:t,success:function(){location.reload()}})}function d(i){const s=c('.dlm-plugin-install-action[data-path="'+i+'"]');s.text(dlm_install_plugins_vars.activate_plugin),s.parents(".dlm-install-plugin-actions").find("button.dlm-plugin-install-action").attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"dlm-extensions-activate-addon",nonce:dlm_install_plugins_vars.install_nonce,plugin_path:i},success:function(t){s.data("action","installed"),s.text(dlm_install_plugins_vars.activated_plugin);{var a;const l=c('.dlm-plugin-install-action[data-path="'+i+'"]'),n=l.data("pid");return l.text(dlm_install_plugins_vars.activate_license),l.parents(".dlm-install-plugin-actions").find("button.dlm-plugin-install-action").attr("disabled","disabled"),void jQuery.ajax({url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"dlm-extensions-activate-addon-license",nonce:dlm_install_plugins_vars.install_nonce,api_product_id:n},success:function(t){l.data("action","installed"),l.text(dlm_install_plugins_vars.activated_license),setTimeout(function(){l.text(dlm_install_plugins_vars.active)},1500)}})}}})}i&&(c("a.dlm-install-plugin-link").on("click",t=>{t.preventDefault();const a=c(t.currentTarget);var t=a.data("slug"),l=a.data("action"),n=(a.parents("tr[data-setting]").attr("data-setting"),a.data("activation_url"));a.attr("disabled",!0),"install"===l?(a.text(dlm_install_plugins_vars.install_plugin),i.updates.installPlugin({slug:t,success:t=>{a.text(dlm_install_plugins_vars.activate_plugin),s(t.activateUrl)},error:t=>{a.text(dlm_install_plugins_vars.no_install+" "+t.errorMessage)}})):"activate"===l&&(a.text(dlm_install_plugins_vars.activate_plugin),s(n))}),c(document).ready(function(){c(".dlm-plugin-install-action").on("click",function(t){t.preventDefault();const a=c(this).data("url"),l=c(this).data("action"),n=c(this),i=c(this).data("path");if("install"===l){n.text(dlm_install_plugins_vars.install_plugin);{var t=a,s=i;const e=c('.dlm-plugin-install-action[data-path="'+s+'"]');e.parents(".dlm-install-plugin-actions").find("button.dlm-plugin-install-action").attr("disabled","disabled"),t={url:ajaxurl,type:"post",async:!0,cache:!1,dataType:"json",data:{action:"dlm-extensions-install-addons",nonce:dlm_install_plugins_vars.install_nonce,plugin:t},success:function(t){t.error?console.log(t.error):(e.parents(".dlm-install-plugin-actions").find("button.dlm-plugin-install-action").removeAttr("disabled"),d(s))},error:function(t,a,l){console.log(t),console.log(a),console.log(l)}},c.ajax(t)}}else"activate"===l&&(n.text(dlm_install_plugins_vars.activate_plugin),d(i))})}))}(window.wp,jQuery);