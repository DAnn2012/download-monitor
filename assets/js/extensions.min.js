jQuery(function(r){r.each(r(".extension_license a"),function(e,i){r(i).click(function(){var s=r(i).closest(".extension_license"),n="inactive"==r(s).find("#status").val()?"activate":"deactivate";r(s).find(".dlm_license_error").remove(),r.post(ajaxurl,{action:"dlm_extension",nonce:r("#dlm-ajax-nonce").val(),product_id:r(s).find("#product_id").val(),key:r(s).find("#key").val(),email:r(s).find("#email").val(),extension_action:n,action_trigger:"-ext-license"},function(e){"failed"==e.result?r(s).prepend(r("<div>").addClass("dlm_license_error").html(e.message)):"activate"==n?(r(s).find(".license-status").addClass("active").html("ACTIVE"),r(s).find(".button").html("Deactivate"),r(s).find("#status").val("active"),r(s).find("#key").attr("disabled",!0),r(s).find("#email").attr("disabled",!0)):(r(s).find(".license-status").removeClass("active").html("INACTIVE"),r(s).find(".button").html("Activate"),r(s).find("#status").val("inactive"),r(s).find("#key").attr("disabled",!1),r(s).find("#email").attr("disabled",!1))})})}),r("#dlm-master-license-btn").on("click",e=>{e.preventDefault();const s=r(e.target),n=s.parents(".dlm-master-license"),i=r("#dlm-master-license").val(),t=r("#dlm-master-license-email").val(),a=n.find('input[type="hidden"]').val(),l=s.data("action"),d=(n.parent().find(".extension_license"),"activate"==l?extensions_vars.activate:extensions_vars.deactivate);s.attr("disabled","disabled"),n.append('<div class="dlm-master-license-response">'+d+"</div>"),r.post(ajaxurl,{action:"dlm_master_license",nonce:a,key:i,email:t,extension_action:l,action_trigger:"-master-license"},function(e){s.removeAttr("disabled"),"failed"==e.result?(n.find(".dlm-master-license-response").remove(),n.append('<div class="dlm-master-license-response">'+e.message+"</div>")):window.location.href=window.location.href})}),r("#dlm-forgot-license").on("click",e=>{e.preventDefault();const s=r(e.target),n=s.data("nonce"),i=s.parents(".dlm-master-license"),t=r("#dlm-master-license-email"),a=t.val();if(s.css("pointer-events","none"),r(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.reaching_server+"</div>"),!a||""===a)return i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.missing_email+"</div>"),t.prop("required",!0),void s.css("pointer-events","auto");r.post(ajaxurl,{action:"dlm_forgot_license",nonce:n,email:a},function(e){s.removeAttr("disabled"),void 0===e.result?(i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+extensions_vars.forget_license_error+"</div>")):(t.prop("required",!1),i.find(".dlm-master-license-response").remove(),i.append('<div class="dlm-master-license-response">'+e.message+"</div>"),s.css("pointer-events","auto"))}),s.css("pointer-events","none")})});