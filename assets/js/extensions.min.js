jQuery(function(d){d.each(d(".extension_license a"),function(e,i){d(i).click(function(){var s=d(i).closest(".extension_license");const n=d(this);n.css("pointer-events","none");var t="inactive"==d(s).find("#status").val()?"activate":"deactivate",e=(d(s).find(".dlm_license_error").remove(),d('input[name="dlm_alt_store"]').is(":checked")?1:0);d.post(ajaxurl,{action:"dlm_extension",nonce:d("#dlm-ajax-nonce").val(),product_id:d(s).find("#product_id").val(),key:d(s).find("#key").val(),email:d(s).find("#email").val(),extension_action:t,action_trigger:"-ext-license",alt_store:e},function(e){"failed"==e.result?d(s).prepend(d("<div>").addClass("dlm_license_error").html(e.message)):"activate"==t?(d(s).find(".license-status").addClass("active").html("ACTIVE"),d(s).find(".button").html("Deactivate"),d(s).find("#status").val("active"),d(s).find("#key").attr("disabled",!0),d(s).find("#email").attr("disabled",!0)):(d(s).find(".license-status").removeClass("active").html("INACTIVE"),d(s).find(".button").html("Activate"),d(s).find("#status").val("inactive"),d(s).find("#key").attr("disabled",!1),d(s).find("#email").attr("disabled",!1)),n.css("pointer-events","auto")})})}),d("#dlm-master-license-btn").on("click",e=>{e.preventDefault();const s=d(e.target),n=s.parents(".dlm-master-license"),t=d("#dlm-master-license").val(),i=d("#dlm-master-license-email").val(),a=n.find('input[type="hidden"]').val(),l=s.data("action"),r=(n.parent().find(".extension_license"),"activate"==l?extensions_vars.activate:extensions_vars.deactivate);if(s.css("pointer-events","none"),""===t)return s.css("pointer-events","auto"),n.find(".dlm-master-license-response").remove(),void n.append('<div class="dlm-master-license-response">'+extensions_vars.missing_license+"</div>");if(""===i)return s.css("pointer-events","auto"),n.find(".dlm-master-license-response").remove(),void n.append('<div class="dlm-master-license-response">'+extensions_vars.missing_email+"</div>");s.attr("disabled","disabled"),n.append('<div class="dlm-master-license-response">'+r+"</div>");e=d('input[name="dlm_alt_store"]').is(":checked")?1:0;d.post(ajaxurl,{action:"dlm_master_license",nonce:a,key:t,email:i,extension_action:l,action_trigger:"-master-license",alt_store:e},function(e){s.removeAttr("disabled"),"failed"==e.result?(n.find(".dlm-master-license-response").remove(),n.append('<div class="dlm-master-license-response">'+e.message+"</div>")):window.location.href=window.location.href,s.css("pointer-events","auto")})}),d("#dlm-forgot-license").on("click",e=>{e.preventDefault();const s=d(e.target),n=s.data("nonce"),t=s.parents(".dlm-master-license"),i=d("#dlm-master-license-email"),a=i.val();if(s.css("pointer-events","none"),d(".dlm-master-license-response").remove(),t.append('<div class="dlm-master-license-response">'+extensions_vars.reaching_server+"</div>"),!a||""===a)return t.find(".dlm-master-license-response").remove(),t.append('<div class="dlm-master-license-response">'+extensions_vars.missing_email+"</div>"),i.prop("required",!0),void s.css("pointer-events","auto");e=d('input[name="dlm_alt_store"]').is(":checked")?1:0;d.post(ajaxurl,{action:"dlm_forgot_license",nonce:n,email:a,alt_store:e},function(e){s.removeAttr("disabled"),void 0===e.result?(t.find(".dlm-master-license-response").remove(),t.append('<div class="dlm-master-license-response">'+extensions_vars.forget_license_error+"</div>")):(i.prop("required",!1),t.find(".dlm-master-license-response").remove(),t.append('<div class="dlm-master-license-response">'+e.message+"</div>"),s.css("pointer-events","auto"))}),s.css("pointer-events","none")})});